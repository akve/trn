<!-- There's no head for this so we'll put it at the top of this file -->
<link rel="stylesheet" type="text/css" href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.3/angular.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.3/angular-sanitize.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.3/angular-animate.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.3/angular-aria.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/angular_material/1.0.5/angular-material.min.js"></script>
<link rel="stylesheet"; href="https://unpkg.com/ng-table@2.0.2/bundles/ng-table.min.css">
<script src="https://unpkg.com/ng-table@2.0.2/bundles/ng-table.min.js"></script>
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/angular_material/1.0.5/angular-material.min.css">
<link rel="stylesheet" type="text/css" href="/wp-content/themes/TRN/js/vendor/angular-growl.css">
<link rel="stylesheet" type="text/css" href="/wp-content/themes/TRN/js/vendor/bootstrap.css">
<script src="/wp-content/themes/TRN/js/Vendor/angular-growl.min.js"></script>



<script>var basepath = "http://localhost/";var templatepath = 'http://localhost/wp-content/themes/TRN/';</script>
<script src="/wp-content/themes/TRN/js/newadmin/app.js"></script>
<script src="/wp-content/themes/TRN/js/newadmin/controllers.js"></script>

<style type="text/css">
button.md-small {
    font-size: 11px;
    min-height: 26px;
    line-height: 26px;
}
button.md-small.green {background-color: #4CAF50; color: #000}
button.md-small.red {background-color: #E57373; color: #000}
button.md-small.blue {background-color: #90CAF9;}
.success-message {
    background-color: #DCEDC8;
    margin: 10px;
    padding: 10px;
    width: 50%;
}
</style>

<div class="admin-body" ng-app="trnadmin" ng-controller="AdminController">
	<div growl></div>
<ul class="nav nav-tabs">
				  <li class="{{currentMode == 'buyers'? 'active':''}}"><a ng-click="changeMode('buyers')">Buyers</a></li>
				  <li class="{{currentMode == 'sellers'? 'active':''}}"><a ng-click="changeMode('sellers')">Sellers</a></li>
				</ul>
	<h1>Manage TRN Settings</h1>
	<!--#include file="contact.html" -->
	<p>Managea Specific TRN settings here.</p>

	<div style='border:1px solid #808080; border-radius:10px; padding:10px; margin:10px;'>
		<h3>Filter</h3>
		<table class="table table-condensed">
			<tr ng-repeat="row in filter.fields">
				<td>{{row.field.title}}</td>
				<td><select ng-model="row.condition" ng-options="option.value as option.name for option in filter.possibleOptions">
					</select>
				<td>
					<input type="text" ng-model="row.value" ng-if="row.field.type != 'bool'">
					<select ng-model="row.value" ng-if="row.field.type == 'bool'">
						<option value='1' selected='row.value=="1"'>Yes</option>
						<option value='0' selected='row.value=="0"'>No</option>
					</select>
				</td>
				<td><a ng-click="filter.remove($index)">remove</td>
			</tr>
		</table>
		<a ng-click="rerun()" class="button">Run search</a> | 
		Add filter:
		<select ng-model="filter.addAs" ng-options="option.name as option.title for option in filter.possibleFields" ng-change='filter.add()'>
		</select> | <a ng-click="exportToCsv()">Export to CSV</a>
	</div>

	<table ng-table="tableParams" class="table table-condensed table-bordered table-striped" show-filter="false">
	    <tr ng-repeat="user in $data">
	        <td title="'Email'" filter="{ contact_email: 'text'}" sortable="'contact_email'">
	           <a ng-click='getBuyerDetails(user)'>{{user.contact_email}}</a> </td>
	        <td title="'AmazonID'" filter="{ amazonid: 'text'}" sortable="'amazonid'">
	            {{user.amazonid}}</td>
            <td title="'Name'" filter="{ name: 'text'}" sortable="'name'">
	            {{user.name}}</td>
            <td title="'Phone'" filter="{ phone: 'text'}" sortable="'phone'">
	            {{user.phone}}</td>
	        <td title="'Created'" filter="{ created: 'number'}" sortable="'created'">
	            {{getDate(user.created)}}</td>
	        <td title="'Total orders'" filter="{ total_orders: 'number'}" sortable="'total_orders'">
	            {{user.total_orders}}</td>
	        <td title="'Current orders'" filter="{ orders: 'number'}" sortable="'orders'">
	            {{user.orders}}</td>
	        <td title="'Reviews'" filter="{ reviews: 'number'}" sortable="'reviews'">
	            {{user.reviews}}</td>
	        <td title="'Avg stars'" filter="{ avg_score: 'number'}" sortable="'avg_score'">
	            {{user.avg_score}}</td>
	        <td title="'Status'">
	        	<a ng-click='changeBuyerState(user.id, {blocked:(user.blocked=="1"?0:1)})'>{{user.blocked == "0"?"Active":"Inactive"}}</a> 
	        </td>
	    </tr>
	</table>
	<div><b> Total {{total}} rows</b></div>

	
</div>